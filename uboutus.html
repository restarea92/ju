
<style>
:root {
	--gradient-primary: linear-gradient(45deg, #667eea, #764ba2);
	--shadow-hover: 0 20px 40px rgba(102, 126, 234, 0.3);
	--border-glass: 1px solid rgba(255, 255, 255, 0.1);
	--bg-glass: rgba(255, 255, 255, 0.05);
	--backdrop-blur: blur(20px);
	--transition-smooth: all 0.3s ease;
}
</style>

<style>
/* 공통 컨테이너 스타일 */
.common-container {
	--common-text-color: #333;
	color: var(--common-text-color);
	padding: 4rem 0;
	h2, h3, h4, h5 {
		margin: 0;
	}
	
	.content-wrapper {
		max-width: 1200px;
		margin: 0 auto;
		padding: 0 20px;
	}
	
	.content-title {
		font-size: 3rem;
		font-weight: 800;
		text-align: center;
		margin-bottom: 4rem;
		color: var(--common-text-color);
		position: relative;
	}
	
	h3 {
		font-size: 1.5rem;
		font-weight: 700;
		text-align: center;
		width: 75%;
		color: var(--common-text-color);
	}


}
</style>

<style>
/* Story Section */
.story.common-container {
	min-height: 100lvh;
	--common-text-color: white;
	background: linear-gradient(45deg, #1a1a1a, #2d2d2d);
	position: relative;
	.overlay {
		position: absolute;
		width: 100%;
		height: 100%;
		top:0;
		left: 0;
		z-index: 0;
	}
	.content-wrapper {
		padding: 4rem 0;
		z-index: 1;
		display: flex;
		justify-content: center;
		align-items: center;
		min-height: 100lvh;
	}
	
	h2.content-title {
		display: grid;
		grid-template-columns: 1fr;
		width: 100%;
		text-align: center;
		display: flex;
		margin: 0;
		padding: 0;
		position: relative;
		line-height: 1;
		margin: 0 auto;
		span {
			display: flex;
			line-height: 1;
		}
		.content-title-text {
			line-height: 1;
			width: 100%;
			height: fit-content;
			width: fit-content;
			display: flex;
			z-index: 1;
			font-size: min(4lvw, 5rem);
			.will-change-overflow {
				overflow: hidden;
				filter: blur(0) brightness(1);
				opacity: 1;
				transform: scale(1);
				transition: 0.3s filter 0.2s ease-in-out,
							0.3s opacity 0.2s ease-in-out,
							0.3s transform 0.2s ease-in-out
							;
			}
			
			.will-change-transform {
				transform: translateX(0);
				transition: 0.3s transform 0.2s;;
			}
			.will-change-opacity.before {
				opacity: 0;
				transition: 0s opacity 0s,
							0.3s transform 0.2s;
			}
			.will-change-opacity.after {
				opacity: 1;
				transition: 0s opacity 0s,
							0.3s transform 0.2s;
			}
		}
		.overlay-text-wrapper {
			display: grid;
			justify-content: center;
			grid-template-columns: min-content min-content 1fr;
			width: 100%;
			.hidden-text {
				visibility: hidden;
				opacity: 0;
			}
			> span {
				grid-row: 1;
			}
			> span:nth-child(1) {
				grid-column: 1 / 2;
			}
			> span:nth-child(2) {
				grid-column: 2 / 3;
			}
			> span:nth-child(3) {
				grid-column: 3 / 4;
			}
			> span:nth-child(4) {
				grid-column: 3 / 4;
			}
		}
	}


	.story-content {
		opacity: 0;
		margin-top: 2rem;
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 60px;
		align-items: center;
		transform: translateY(10%);
	}

	.story-text {
		color: #e0e0e0;
		
		h3 {
			font-size: 2rem;
			color: white;
			margin-bottom: 1.5rem;
			background: var(--gradient-primary);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			width: 100%;
			text-align: left;
		}
		
		p {
			font-size: 1.1rem;
			margin-bottom: 1.5rem;
			line-height: 1.8;
			color: #e0e0e0;
			font-weight: 400;
		}
	}

	&.scroll-end {
		.story-content {
			opacity: 1;
			transform: translateY(0);
			transition: 0.3s all ;
		}
		h2 {
			.content-title-text {
				.will-change-overflow {
					filter: blur(16px) brightness(0.5);
					opacity: 0;
					transform: scale(0.5);
					transition: 0.3s filter 0.2s ease-in-out,
								0.3s opacity 0.2s ease-in-out,
								0.3s transform 0.2s ease-in-out
								;
				}
				.will-change-transform {
					transform: translateX( calc(-1 * var(--will-change-overflow-width)) );
					transition: 0.3s transform 0.2s;
				}
				.will-change-opacity.before {
					opacity: 1;
					transition: 0.3s opacity 0.5s,
								0.3s transform 0.2s
					;
				}
				.will-change-opacity.after {
					opacity: 0;
					transition: 0.3s opacity 0.3s,
								0.3s transform 0.2s;
				}
			}
		}
	}

	.story-visual {
		position: relative;
		height: 400px;
		background: var(--gradient-primary);
		border-radius: 20px;
		display: flex;
		align-items: center;
		justify-content: center;
		overflow: hidden;
	}

	
}

/* Services Section */
.services.common-container {
	--common-text-color: white;
	background: linear-gradient(135deg, #2d2d2d, #1a1a1a);
}

.services-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
	gap: 40px;
	margin-top: 60px;
}

.service-card {
	background: var(--bg-glass);
	padding: 40px 30px;
	border-radius: 20px;
	text-align: center;
	backdrop-filter: var(--backdrop-blur);
	border: var(--border-glass);
	transition: var(--transition-smooth);
	position: relative;
	overflow: hidden;

	&::before {
		content: '';
		position: absolute;
		top: 0;
		left: -100%;
		width: 100%;
		height: 100%;
		background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
		transition: left 0.3s ease;
	}

	&:hover {
		transform: translateY(-10px);
		box-shadow: var(--shadow-hover);

		&::before {
			left: 100%;
		}
	}

	.service-icon {
		font-size: 3rem;
		margin-bottom: 1.5rem;
		background: var(--gradient-primary);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	h4 {
		font-size: 1.5rem;
		color: white;
		margin-bottom: 1rem;
	}

	p {
		color: #b0b0b0;
		line-height: 1.6;
	}
}

/* CEO Message Section */
.ceo-message.common-container {
	--common-text-color: black;
	background-color: white;
	position: relative;
	min-height: 120lvh;
	
	h3 {
		width: 100%;
	}
}

.ceo-content {
	display: grid;
	grid-template-columns: 400px 1fr;
	gap: 80px;
	align-items: start;
	margin-top: 60px;
}

.ceo-profile {
	text-align: center;
	position: sticky;
	top: 120px;

	.profile-image {
		margin-bottom: 2rem;
		display: flex;
		justify-content: center;
		aspect-ratio: 3 / 4;
		box-shadow: 0 20px 40px rgba(0,0,0,0.3);
		position: relative;
		overflow: hidden;
		border-radius: 1.5rem;
		img {
			width: 100%;
			height: 100%;
			object-fit: cover;

		}

	}

	.ceo-info h3 {
		font-size: 2rem;
		color: black;
		margin-bottom: 0.5rem;
		font-weight: 700;
		text-align: center !important;
	}

	.ceo-title {
		color: #667eea;
		font-size: 1.1rem;
		font-weight: 500;
		margin-bottom: 2rem;
	}

	.signature {
		display: flex;
		justify-content: center;
		opacity: 0.8;
	}
}

.ceo-message-text {
	border-radius: 25px;
	backdrop-filter: var(--backdrop-blur);
	border: var(--border-glass);

	.message-content {
		h3 {
			font-size: 2.2rem;
			color: white;
			margin-bottom: 2rem;
			background: var(--gradient-primary);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			font-weight: 700;
			width: 100%;
			text-align: left;
		}

		p {
			color: #86868b;
			font-size: 1.125rem;
			line-height: 1.475;
			margin-bottom: 1.5rem;

			&.message-closing {
				font-size: 1.2rem !important;
				font-weight: 600 !important;
				color: #667eea !important;
				text-align: center;
				margin-top: 2.5rem !important;
				padding-top: 2rem;
				border-top: var(--border-glass);
			}
		}
	}
}

/* Vision Section */
.vision.common-container {
	--common-text-color: white;
	background: linear-gradient(135deg, #333, #2d2d2d);
	text-align: center;

	.vision-content {
		max-width: 800px;
		margin: 0 auto;

		h2 {
			font-size: 3rem;
			color: white;
			margin-bottom: 2rem;
			background: var(--gradient-primary);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			text-align: center !important;
		}

		p {
			font-size: 1.3rem;
			color: #e0e0e0;
			line-height: 1.8;
			margin-bottom: 2rem;
		}
	}

	.vision-stats {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
		gap: 40px;
		margin-top: 60px;

		.stat {
			background: var(--bg-glass);
			padding: 30px 20px;
			border-radius: 15px;
			backdrop-filter: var(--backdrop-blur);
			border: var(--border-glass);

			.stat-number {
				font-size: 2.5rem;
				font-weight: bold;
				color: #667eea;
				margin-bottom: 0.5rem;
			}

			.stat-label {
				color: #b0b0b0;
				font-size: 1rem;
			}
			
			.reference {
				color: #666669;
				font-size: 0.75rem;
			}
		}
	}
}

/* Animations */
@keyframes shimmer {
	0% { transform: translateX(-100%); }
	100% { transform: translateX(100%); }
}

.fade-in {
	opacity: 0;
	transform: translateY(30px);
	transition: var(--transition-smooth);

	&.visible {
		opacity: 1;
		transform: translateY(0);
		
	}
}

/* Responsive */
@media (max-width: 990px) {
	.story.common-container .content {
		margin-top: var(--header-height);
	}
}
@media (max-width: 768px) {
	.common-container {
		padding: 80px 0;
		
		.content-title {
			font-size: 2.2rem;
		}
	}

	.story-content {
		grid-template-columns: 1fr;
		gap: 40px;
	}

	.story-visual {
		height: 300px;
	}

	.services-grid {
		grid-template-columns: 1fr;
		gap: 30px;
	}

	.ceo-content {
		grid-template-columns: 1fr;
		gap: 40px;
	}

	.ceo-profile {
		position: static;

		.profile-placeholder {
			width: 200px;
			height: 300px;
			font-size: 4rem;
		}

		.ceo-info h3 {
			font-size: 1.6rem;
		}
	}

	.ceo-message-text {

		.message-content h3 {
			font-size: 1.8rem;
		}
	}

	.vision.common-container {
		.vision-content {
			h2 {
				font-size: 2.2rem;
			}

			p {
				font-size: 1.1rem;
			}
		}

		.vision-stats {
			grid-template-columns: repeat(2, 1fr);
			gap: 20px;
		}
	}
}
</style>

<!-- Story Section -->
<div id="about-ju" class="story common-container">
	<div class="hero-spacer">
		<div class="sticky-wrapper">
		<div class="overlay">
			<img src="https://images.pexels.com/photos/3990842/pexels-photo-3990842.jpeg" width="1920" style="width: 100%; height: 100%; object-fit: cover;">
		</div>
			<div class="content-wrapper">
				<div class="content">
					<h2 class="content-title">
						<div class="content-title-text">
							<span class="overlay-text-wrapper">
								<span class="will-change-overflow">ALL&nbsp;</span>
								<span class="will-change-transform">
									ABOUT&nbsp;
								</span>
								<span class="will-change-opacity will-change-transform before">JU.</span>
								<span class="will-change-opacity will-change-transform after">VOICE.</span>
							</span>
						</div>
					</h2>
					<div class="story-content">
						<div class="story-text">
							<h3>15~25자 내외의 제목 영역.</h3>
							<p>
								이것은 의미가 없는 테스트 문장입니다. 이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다. 이것은 테스트 문장입니다. 
								이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다. 이것은 테스트 문장입니다.
							</p>
							<p>
								이것은 의미가 없는 테스트 문장입니다. 이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다. 이것은 테스트 문장입니다. 
								이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장입니다. 이것은 의미가 없는 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다. 
							</p>
						</div>
						<div class="story-visual fade-in"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


<script type="module">
/**
 * Visual Scroll Animation Module
 * Handles scroll-triggered visual effects with GSAP and ScrollTrigger
 * @version 1.0.7
 */

// import { initGSAP } from './gsapUtils.js';
import { initGSAP } from 'https://restarea92.github.io/ju/modules/gsapUtils.js';

const app = {
    // ========== Configuration ==========
    CONFIG: {
        VERSION: '1.0.0',
    },

    // ========== DOM Elements Cache ==========
    elements: {
        spacer: document.querySelector('.hero-spacer'),
		container: document.querySelector('#about-ju.common-container'),
		get trigger() { return this.spacer },
		get stickyWrapper() { return this.trigger?.querySelector('.sticky-wrapper'); },
		get content() { return this.trigger?.querySelector('.content')},
		get contentWrapper() { return this.trigger?.querySelector('.content-wrapper')},
		get contentTitleText() { return this.trigger?.querySelector('.content-title-text')},
		get overlay() { return this.trigger?.querySelector('.overlay'); },
        get contentTitleOverlay() { return this.trigger?.querySelector('.content-title-text .overlay-text-wrapper'); },
		get hiddenText() { return this.contentTitleOverlay?.querySelector('.hidden-text'); },
		get offsetText() { return this.contentTitleOverlay?.querySelector('.offset-text'); },
    },
	
    // ========== Initialization ==========
    /**
     * Initialize the application
     */
    init() {
        console.log(this.CONFIG.VERSION);
        if (!initGSAP()) return;

        this.setHeaderHeightVariable(); // 헤더 높이 → CSS 변수로 반영
        this.initHeroScroll();
    },

    // ========== rect Scroll ==========
    /**
     * Initialize rect scroll animations
     * Setup individual rect scroll container
     */
    initHeroScroll() {
		const trigger = this.elements.trigger;
		const container = this.elements.container;
		const stickyWrapper = this.elements.stickyWrapper;
		const overlay = this.elements.overlay;
		const overlayImage = overlay.querySelector('img');
		const content = this.elements.content;
		const contentWrapper = this.elements.contentWrapper;
		const contentTitleText = this.elements.contentTitleText;

		const hiddenText = this.elements.hiddenText;
		const offsetText = this.elements.offsetText;
		const contentTitleOverlay = this.elements.contentTitleOverlay;

        // 초기 위치 세팅
        if (trigger && contentTitleOverlay) {
			gsap.set(trigger, { 
				"--hero-scroll-inverted-progress": 1,
                "--hero-scroll-progress": 0,
				height: "200lvh",
			});

			gsap.set(container, { 
				marginTop: "calc(-1 * var(--header-height))",
			});
		
			gsap.set(stickyWrapper, { 
				width:"100%",
				minHeight:"100lvh",
				position: "sticky",
				top:0,
			});

			
			const rect = contentTitleText.getBoundingClientRect();
			const centerX = window.innerWidth / 2;
			const centerY = window.innerHeight / 2;

			const offsetX = rect.left + rect.width / 2 - centerX;
			const offsetY = content.offsetTop - centerY;

			const willChangeOverflow = document.querySelector('.will-change-overflow');
			const willChangeOverflowWidth = willChangeOverflow.getBoundingClientRect().width;
					
			gsap.set(stickyWrapper, { 
				"--will-change-overflow-width": `${willChangeOverflowWidth}px`,
			});

			gsap.set(contentTitleOverlay, {
				transformOrigin: "center",
				zIndex: 1,
				x: -offsetX,
				y: -offsetY,
				scale: 2,
			});

			gsap.set(overlay, {
					filter: "blur(0px)"
			});
			
			gsap.set(overlayImage, {
					filter: "brightness(0.9) saturate(1)",
			});

			// 하나의 타임라인으로 통합 (성능상 더 좋음)
			const tl = this.createTimeline({
				start: "top top",
				end: "center center",
				onUpdate: self => {
					if (self.progress >= 1) {  // === 1 대신 >= 1 사용 (더 안정적)
						this.elements.container.classList.add('scroll-end');
					} else {
						this.elements.container.classList.remove('scroll-end');
					}
				}
			});

			// 동시에 실행되는 애니메이션들을 하나의 타임라인에 추가
			tl.to(contentTitleOverlay, {
				ease: "power3.inOut",
				y: 0,
			}, 0)
			.to(contentTitleOverlay, {
				ease: "power3.out", 
				x: 0,
				scale: 1,
			}, 0)
			.to(overlay, {
				ease: "power3.out", 
				filter: "blur(32px)"
			}, 0) 
			.to(overlayImage, {
				ease: "power3.inOut", 
				filter: "brightness(0.25) saturate(0.1)",
				opacity:0.2,
			}, 0); // 같은 시간(0)에 시작하여 동시 실행

		} 
	},

    // ========== 상태 관리 ==========
    setHeaderHeightVariable() {
        const header = document.getElementById('doz_header_wrap');
        const headerHeight = header ? header.getBoundingClientRect().height : 0;
        document.documentElement.style.setProperty('--header-height', `${headerHeight}px`);
    },


    createTimeline(options = {}) {
        return gsap.timeline({
            scrollTrigger: {
                trigger: this.elements.trigger, 
                start: "top bottom",
                end: "bottom bottom",
                scrub: 1,
                onUpdate: self => {
                    const progressPercent = (self.progress * 100).toFixed(0);
                },
                ...options,
            }
        });
    },
}

// export default app;

document.addEventListener('DOMContentLoaded', () => {
	app.init();
});
</script>

<!-- Services Section -->
<div id="about-ju-services" class="services common-container">
	<div class="content-wrapper">
		<h2 class="content-title fade-in">Why JU?</h2>
		<div class="services-grid">
			<div class="service-card fade-in">
				<div class="service-icon">🎵</div>
				<h4>Music</h4>
				<p>이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다. 이것은 테스트 문장입니다.</p>
			</div>
			<div class="service-card fade-in">
				<div class="service-icon">🎙️</div>
				<h4>Recording</h4>
				<p>이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장입니다. 이것은 의미가 없는 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다.</p>
			</div>
			<div class="service-card fade-in">
				<div class="service-icon">🎧</div>
				<h4>Headphone</h4>
				<p>이것은 의미가 없는 테스트 문장입니다. 이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다. 이것은 테스트 문장입니다.</p>
			</div>
			<div class="service-card fade-in">
				<div class="service-icon">🎭</div>
				<h4>Acting</h4>
				<p>이것은 의미가 없는 테스트 문장입니다. 이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다. 이것은 테스트 문장입니다.</p>
			</div>
		</div>
	</div>
</div>

<!-- CEO Message Section -->
<div id="about-ju-ceo" class="ceo-message common-container">
	<div class="content-wrapper">
		<div class="ceo-content">
			<div class="ceo-profile fade-in">
				<div class="profile-image">
					<img src="https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg" width=500 />
				</div>
				<div class="ceo-info">
					<h3>Sleepy Wonder</h3>
					<p class="ceo-title">Vocal Studio JU 대표</p>
					<div class="signature">
						<svg width="120" height="40" viewBox="0 0 120 40">
							<path d="M10 25 Q20 15, 30 25 Q40 35, 50 25 Q60 15, 70 25 Q80 35, 90 25 Q100 15, 110 25" 
									stroke="#667eea" stroke-width="2" fill="none"/>
						</svg>
					</div>
				</div>
			</div>
			<div class="ceo-message-text fade-in">
				<div class="message-content">
					<h3>저는 Vocal Studio의 대표자입니다.</h3>
					<p>
						안녕하세요, 이것은 Vocal Studio JU 대표 예제 인사말입니다.
					</p>
					<p>
						이 인삿말은 예시로 작성되었습니다.<br>
						지난 n년간 음악교육 현장에서 수많은 수강생들과 함께했습니다.<br>
						저를 포함하여 JU의 강사진들은 정해진 틀에서 이루어지는 형식적인 레슨방식보다는 수강생들이 직면하는 문제점들과 실질적인 고민들을 해결해 주는것을 목표로 하고 있습니다.<br><br>

						이것은 의미가 없는 테스트 문장입니다. 이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다. 이것은 테스트 문장입니다. <br><br>

						단순히 기술을 가르치는 것을 넘어, <br>
						수강생들이 진짜 본인의 음악을 찾고 그 속에서 자유롭게 노래할 수 있도록, <br>
						음악을 사랑하는 모든 수강생분들이 음악을 통해 자신만의 색깔을 찾고, <br>
						꿈을 실현할 수 있도록하는 JU만의 차별화된 교육 철학을 이어나가고자 합니다.<br>

						이것은 의미가 없는 테스트 문장입니다. 이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다. 이것은 테스트 문장입니다. 
					</p>

					<p>
						이것은 의미가 없는 테스트 문장입니다. 이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다. 이것은 테스트 문장입니다. 
					</p>
					<p class="message-closing">
						이것은 의미가 없는 테스트 문장입니다. 이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다. <br>
						이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장입니다. 이것은 테스트 문장입니다. <br>
						이것은 테스트 문장입니다. <br><br>

						JU와 함께 특별한 음악 여정을 시작해보세요. <br>
						이것은 테스트 문장입니다.  이것은 의미가 없는 테스트 문장이기 때문입니다.<br>
					</p>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Vision Section -->
<div id="about-ju-vision" class="vision common-container">
	<div class="content-wrapper">
		<div class="vision-content fade-in">
			<h2 class="content-title">Our Vision (예시)</h2>
			<p>
				이것은 의미가 없는 테스트 문장입니다.
				이것은 테스트 문장입니다. 이것은 의미가 없는 테스트 문장이기 때문입니다. 
			</p>
		</div>
		<div class="vision-stats">
			<div class="stat fade-in">
				<div class="stat-number" data-target="15200" data-unit="+">0</div>
				<div class="stat-label">지금까지 함께한 수강생</div>
				<div class="reference">2024년 7월까지 집계 기준</div>
			</div>
			<div class="stat fade-in">
				<div class="stat-number" data-target="8" data-unit=" 년">0</div>
				<div class="stat-label">운영 연수</div>
				<div class="reference">2025년 현재 기준</div>
			</div>
			<div class="stat fade-in">
				<div class="stat-number" data-target="15" data-unit="+">0</div>
				<div class="stat-label">지점 수</div>
				<div class="reference">2025년 현재</div>
			</div>
			<div class="stat fade-in">
				<div class="stat-number" data-target="98" data-unit="%">0</div>
				<div class="stat-label">만족도</div>
				<div class="reference">2024년 7월 온라인 후기 집계기준</div>
			</div>
		</div>
	</div>
</div>

<script>

document.addEventListener('DOMContentLoaded', () => {

	// 기존 스크롤 애니메이션 코드 + 카운터 애니메이션 추가
	const options = {
		observerOptions: {
			threshold: 0.1,
			rootMargin: '0px 0px -50px 0px'
		},
		transformYOffset: 30 // 예: transform: translateY(100px) 고려용
	};
	// 카운터 애니메이션 함수
function animateCounter(element) {
	const target = parseFloat(element.dataset.target);
	const unit = element.dataset.unit || '';
	const duration = 2000;
	let current = 0;

	const step = target / (duration / 16);

	const timer = setInterval(() => {
		current += step;
		if (current >= target) {
			current = target;
			clearInterval(timer);
		}

		const isFinal = current === target;
		let displayValue;

		if (target < 1000 && current < 1000) {
			displayValue = Math.floor(current).toString();

		} else if (current < 1000) {
			displayValue = Math.floor(current).toString();

		} else {
			const kValue = current / 1000;
			const rounded = Math.round(kValue * 10) / 10;

			if (isFinal && rounded % 1 === 0) {
				displayValue = `${Math.floor(rounded)}k`;
			} else {
				displayValue = `${rounded.toFixed(1)}k`;
			}
		}

		// unit이 '+'일 때는 마지막에만 붙임
		if (unit === '+') {
			element.textContent = isFinal ? displayValue + '+' : displayValue;
		} else {
			element.textContent = displayValue + unit;
		}

	}, 16);
}




	const observer = new IntersectionObserver(function(entries) {
		entries.forEach(entry => {
			const el = entry.target;

			if (entry.isIntersecting) {
				if (!el.classList.contains('visible')) {
					el.classList.add('visible');

					if (el.classList.contains('stat-number')) {
						animateCounter(el); // 중복 실행 방지
					}
				}

			} else {
				const elementTop = entry.boundingClientRect.top;
				const viewportTop = entry.rootBounds.top;

				// 아래로 스크롤해 나간 경우에만 클래스 제거
				if (elementTop > viewportTop) {
					el.classList.remove('visible');
				}
			}
		});
	}, options.observerOptions);

	document.querySelectorAll('.fade-in').forEach(el => {
		const rect = el.getBoundingClientRect();
		console.log(rect.bottom);
		if (rect.bottom < 0) {
			el.classList.add('visible');
		}

		// 관찰 시작
		observer.observe(el);
	});

	// stat-number 개별 관찰 추가
	document.querySelectorAll('.stat-number').forEach(el => {
		observer.observe(el);
	});
});
</script>